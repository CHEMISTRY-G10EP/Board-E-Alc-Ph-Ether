<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  
  
  <title> Quiz ‚Äì 17. Chemical reactions of ethers- Cleavage of C‚ÄìO bond in ethers, Electrophilic substitution reactions</title>
  
  
  <style>
    body{font-family:Arial, sans-serif;padding:20px;background:#121212;color:#f0f0f0;}
    #logo{display:block;margin:0 auto 25px;max-width:180px;}
    #name-container{background:#1e1e1e;padding:30px;border-radius:6px;max-width:420px;margin:0 auto;}
    #name-container input{width:100%;padding:10px;margin:10px 0 15px;border:none;border-radius:4px;font-size:16px;}
    #quiz-container{display:none;}
    .question{border:1px solid #333;padding:15px;margin-bottom:20px;border-radius:5px;background:#1e1e1e;}
    .question h3{margin:0 0 10px;}
    .option-item { display: flex; align-items: center; gap: 8px; margin: 6px 0; padding: 6px 8px; border-radius: 4px; background: #2a2a2a; color: #ccc; cursor: pointer; }
    .option-item input[type="radio"] { margin: 0; }
    .submit-button,.toggle-button,.dontknow-button{margin-top:10px;padding:6px 12px;background:#007BFF;color:#fff;border:none;border-radius:4px;cursor:pointer;margin-right:5px;}
    .solution{display:none;margin-top:10px;background:#2d2d2d;padding:10px;border-left:4px solid #28a745;}
    #scorecard{background:#2d2d2d;padding:15px;border-radius:6px;margin-top:30px;display:none;}
    #timer{font-weight:bold;color:#00ffcc;}
    #studentPrintName{text-align:center;font-size:18px;font-weight:bold;margin-top:-15px;margin-bottom:5px;display:none;}
    #examDateTime{text-align:center;font-size:14px;margin-bottom:20px;display:none;}
    @media print {
      body { background: #fff; color:#000; }
      .submit-button, .dontknow-button, .toggle-button, #reportBtn, #reportModal { display:none !important; }
      #name-container { display:none !important; }
    }
    #reportBtn { position: fixed; bottom: 20px; right: 20px; background: #ff4757; color: white; border: none; padding: 12px 18px; border-radius: 50px; cursor: pointer; font-weight: bold; box-shadow: 0px 4px 10px rgba(0,0,0,0.3); z-index: 1000; }
    #reportModal { display: none; position: fixed; bottom: 80px; right: 20px; background: #1e1e1e; border: 1px solid #444; padding: 15px; border-radius: 8px; width: 260px; z-index: 1001; }
    #reportModal textarea { width: 100%; height: 80px; padding: 8px; border: none; border-radius: 4px; resize: none; font-size: 14px; }
    #reportModal button { margin-top: 10px; padding: 8px 12px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
    #sendReport { background: #28a745; color: white; }
    #closeReport { background: #dc3545; color: white; margin-left: 5px; }
  </style>

  <!-- MathJax Configuration -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(','\\)'], ['$', '$']], 
        displayMath: [['$$','$$'], ['\\[','\\]']],
        processEscapes: true
      },
      options: { skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'] }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

<img id="logo" src="https://i.ibb.co/WNZTWPwv/LOGO-PNG-2025-fab.png" alt="Logo" />

<div id="studentPrintName"></div>
<div id="examDateTime"></div>

<div id="name-container">
  <h2>Enter your name to begin</h2>
  <input type="text" id="studentNameInput" placeholder="Your Name" />
  <button class="submit-button" onclick="startQuiz()">Start Quiz</button>
</div>

<div id="quiz-container">


  <h2> Quiz ‚Äì 17. Chemical reactions of ethers- Cleavage of C‚ÄìO bond in ethers, Electrophilic substitution reactions</h2>
  
  
  <p><strong>Time Elapsed:</strong> <span id="timer">00:00</span></p>
  <div id="questions-container"></div>

  <div style="margin-top:30px;">
    <button class="submit-button" onclick="finalSubmit()">Final Submit</button>
    <button class="submit-button" onclick="printQuestions()">Print Questions</button>
    <button class="submit-button" id="printScoreBtn" onclick="printScorecard()" style="display:none;">Save or Print Scorecard</button>
    <button class="submit-button" id="shareWhatsappBtn" style="display:none;">SHARE on WhatsApp</button>
  </div>

 <div id="scorecard">
  <h3>Your Scorecard</h3>
  <p id="scoreText"></p>
  <table id="scoreTable" border="1" cellspacing="0" cellpadding="6" style="width:100%;border-collapse:collapse;margin-top:15px;">
    <thead style="background:#333;color:#fff;">
      <tr>
        <th>Q.No</th>
        <th>Question</th>
        <th>Your Answer</th>
        <th>Correct Answer</th>
        <th>Result</th>
        <th>Solution</th>
      </tr>
    </thead>
    <tbody id="scoreDetails"></tbody>
  </table>
</div>

<button id="reportBtn">Report Mistake</button>

<div id="reportModal">
  <textarea id="reportMsg" placeholder="Describe the mistake..."></textarea>
  <div style="text-align:right;">
    <button id="sendReport">Send</button>
    <button id="closeReport">Close</button>
  </div>
</div>

<script>


const Q = [
  {
    "id": "q1",
    "text": "When ethers react with HI, what is the first bond to be cleaved?",
    "options": [
      "A. C‚ÄìH bond",
      "B. C‚ÄìO bond",
      "C. O‚ÄìH bond",
      "D. C‚ÄìC bond"
    ],
    "correct": "B",
    "solution": "The C‚ÄìO bond in ethers is cleaved first when treated with HI.",
    "solution_steps": [
      "1. Protonation of the oxygen atom by HI increases the electrophilicity of the C‚ÄìO bond.",
      "2. Cleavage occurs at the C‚ÄìO bond to form alkyl iodide and alcohol/phenol."
    ]
  },
  {
    "id": "q2",
    "text": "Diethyl ether reacts with excess HI to give:",
    "options": [
      "A. Ethanol",
      "B. Ethyl iodide + HI",
      "C. Ethyl iodide + water",
      "D. Only ethyl iodide"
    ],
    "correct": "C",
    "solution": "Diethyl ether reacts with HI to give two moles of ethyl iodide and one mole of water.",
    "solution_steps": [
      "1. Protonation of ether oxygen by HI.",
      "2. Cleavage of C‚ÄìO bond forms ethyl iodide and ethanol.",
      "3. Ethanol reacts with HI to give another ethyl iodide and water."
    ]
  },
  {
    "id": "q3",
    "text": "When phenyl ethyl ether is treated with HI, the major product is:",
    "options": [
      "A. Ethyl iodide + Phenol",
      "B. Phenyl iodide + Ethanol",
      "C. Ethyl alcohol + I‚ÇÇ",
      "D. Phenol + Ethyl alcohol"
    ],
    "correct": "A",
    "solution": "The C‚ÄìO bond between the ethyl group and oxygen is cleaved, giving ethyl iodide and phenol.",
    "solution_steps": [
      "1. Protonation of the ether oxygen by HI.",
      "2. Cleavage occurs at the C‚ÄìO bond connected to the alkyl group (ethyl).",
      "3. Products are ethyl iodide and phenol."
    ]
  },
  {
    "id": "q4",
    "text": "Why do aryl ethers on cleavage with HI produce phenol rather than aryl iodide?",
    "options": [
      "A. Phenyl‚ÄìO bond is stronger",
      "B. C‚ÄìI bond is unstable in aryl group",
      "C. Aryl halides do not undergo SN2 cleavage easily",
      "D. Phenol is more stable"
    ],
    "correct": "C",
    "solution": "Aryl halides resist SN2 cleavage due to the sp¬≤ hybridized carbon, so cleavage occurs to give phenol instead of aryl iodide.",
    "solution_steps": [
      "1. Aryl halides are poor substrates for SN2 reactions.",
      "2. Protonation of ether oxygen makes the alkyl group leave.",
      "3. Phenol is formed, not aryl iodide."
    ]
  },
  {
    "id": "q5",
    "text": "In electrophilic substitution of anisole, substitution occurs mainly at:",
    "options": [
      "A. Ortho and para positions",
      "B. Meta position",
      "C. Only ortho position",
      "D. Only para position"
    ],
    "correct": "A",
    "solution": "The ‚ÄìOCH‚ÇÉ group is an electron-donating group, activating the ortho and para positions for electrophilic substitution.",
    "solution_steps": [
      "1. Lone pair on oxygen delocalizes into the benzene ring.",
      "2. Electron density increases at ortho and para positions.",
      "3. Electrophiles preferentially attack these positions."
    ]
  },
  {
    "id": "q6",
    "text": "During nitration of anisole, the major product is:",
    "options": [
      "A. o-nitroanisole",
      "B. p-nitroanisole",
      "C. m-nitroanisole",
      "D. mixture of ortho and para nitroanisole"
    ],
    "correct": "D",
    "solution": "Nitration of anisole gives a mixture of ortho and para nitro derivatives due to activation by the ‚ÄìOCH‚ÇÉ group.",
    "solution_steps": [
      "1. ‚ÄìOCH‚ÇÉ group activates ortho and para positions.",
      "2. Electrophilic NO‚ÇÇ attacks these positions.",
      "3. Minor steric effects may favor para slightly, but a mixture is formed."
    ]
  },
  {
    "id": "q7",
    "text": "Why is anisole more reactive towards electrophilic substitution than benzene?",
    "options": [
      "A. ‚ÄìOCH‚ÇÉ group is electron withdrawing",
      "B. ‚ÄìOCH‚ÇÉ group activates the ring by resonance and hyperconjugation",
      "C. ‚ÄìOCH‚ÇÉ group decreases electron density at ortho and para positions",
      "D. None of these"
    ],
    "correct": "B",
    "solution": "The ‚ÄìOCH‚ÇÉ group donates electron density via resonance and hyperconjugation, activating the ring for electrophilic substitution.",
    "solution_steps": [
      "1. Oxygen lone pair delocalizes into the ring.",
      "2. Electron density at ortho and para positions increases.",
      "3. Electrophiles attack more readily than in benzene."
    ]
  },
  {
    "id": "q8",
    "text": "When anisole is brominated in the presence of FeBr‚ÇÉ, the major product is:",
    "options": [
      "A. o-bromoanisole",
      "B. p-bromoanisole",
      "C. m-bromoanisole",
      "D. both o- and p-bromoanisole"
    ],
    "correct": "D",
    "solution": "Bromination of anisole gives both ortho and para products due to activation by the ‚ÄìOCH‚ÇÉ group.",
    "solution_steps": [
      "1. FeBr‚ÇÉ polarizes Br‚ÇÇ to form electrophilic Br‚Å∫.",
      "2. Electrophile attacks ortho and para positions.",
      "3. Both o- and p-bromoanisole are obtained."
    ]
  },
  {
    "id": "q9",
    "text": "In the Friedel‚ÄìCrafts reaction of anisole with CH‚ÇÉCl and AlCl‚ÇÉ, the major products are:",
    "options": [
      "A. o-methyl anisole and p-methyl anisole",
      "B. m-methyl anisole only",
      "C. phenol + CH‚ÇÑ",
      "D. anisole remains unchanged"
    ],
    "correct": "A",
    "solution": "The ‚ÄìOCH‚ÇÉ group directs the incoming CH‚ÇÉ‚Å∫ electrophile to ortho and para positions, giving o- and p-methyl anisole.",
    "solution_steps": [
      "1. AlCl‚ÇÉ generates the electrophile CH‚ÇÉ‚Å∫ from CH‚ÇÉCl.",
      "2. Electrophile attacks ortho and para positions activated by ‚ÄìOCH‚ÇÉ.",
      "3. Products formed are o- and p-methyl anisole."
    ]
  },
  {
    "id": "q10",
    "text": "What is the effect of the ‚ÄìOCH‚ÇÉ group on the orientation of electrophilic substitution in anisole?",
    "options": [
      "A. It is meta-directing",
      "B. It is ortho/para-directing",
      "C. It is deactivating",
      "D. It has no effect"
    ],
    "correct": "B",
    "solution": "The ‚ÄìOCH‚ÇÉ group is electron donating and activates the ortho and para positions.",
    "solution_steps": [
      "1. Oxygen lone pair delocalizes into the ring.",
      "2. Electron density increases at ortho and para positions.",
      "3. Electrophiles preferentially attack these positions."
    ]
  },
  {
    "id": "q11",
    "text": "Which of the following ethers on cleavage with HI will give only alkyl iodides and no alcohol/phenol?",
    "options": [
      "A. Diethyl ether",
      "B. Phenyl ethyl ether",
      "C. Anisole",
      "D. Methyl phenyl ether"
    ],
    "correct": "A",
    "solution": "Alkyl ethers like diethyl ether give only alkyl iodides, whereas aryl ethers give phenols.",
    "solution_steps": [
      "1. C‚ÄìO bond cleavage occurs at the alkyl side.",
      "2. HI reacts to form alkyl iodide.",
      "3. No phenol is formed for simple alkyl ethers."
    ]
  },
  {
    "id": "q12",
    "text": "What is formed when anisole undergoes nitration using HNO‚ÇÉ/H‚ÇÇSO‚ÇÑ?",
    "options": [
      "A. m-nitroanisole only",
      "B. o- and p-nitroanisole mixture",
      "C. Nitrobenzene",
      "D. 2,4,6-trinitroanisole"
    ],
    "correct": "B",
    "solution": "Nitration of anisole gives a mixture of ortho and para nitro derivatives due to the ‚ÄìOCH‚ÇÉ group activation.",
    "solution_steps": [
      "1. ‚ÄìOCH‚ÇÉ activates ortho and para positions.",
      "2. Electrophilic NO‚ÇÇ attacks these positions.",
      "3. Minor steric effects may slightly favor para, but mixture forms."
    ]
  },
  {
    "id": "q13",
    "text": "Which of the following statements is correct about cleavage of ethers?",
    "options": [
      "A. Tertiary alkyl ethers cleave more readily than primary alkyl ethers",
      "B. Primary alkyl ethers cleave faster due to stable carbocation",
      "C. Aryl ethers are easily cleaved",
      "D. Ethers are resistant to HI but reactive with HNO‚ÇÉ"
    ],
    "correct": "A",
    "solution": "Tertiary alkyl ethers cleave faster due to more stable carbocation formation in the SN1 mechanism.",
    "solution_steps": [
      "1. Tertiary carbocation is more stable than primary or secondary.",
      "2. Cleavage with HI occurs faster for tertiary ethers."
    ]
  },
  {
    "id": "q14",
    "text": "Electrophilic substitution in anisole proceeds faster than in benzene because:",
    "options": [
      "A. OCH‚ÇÉ group decreases resonance",
      "B. OCH‚ÇÉ group increases electron density at ortho and para positions",
      "C. OCH‚ÇÉ group withdraws electrons through ‚ÄìI effect",
      "D. Anisole is less stable"
    ],
    "correct": "B",
    "solution": "The ‚ÄìOCH‚ÇÉ group donates electron density to the ring, enhancing reactivity at ortho and para positions.",
    "solution_steps": [
      "1. Resonance donation from oxygen increases electron density.",
      "2. Ortho and para positions are more nucleophilic.",
      "3. Electrophilic attack occurs faster than in benzene."
    ]
  },
  {
    "id": "q15",
    "text": "When anisole undergoes halogenation without a catalyst (Br‚ÇÇ in CS‚ÇÇ), the major product is:",
    "options": [
      "A. o-bromoanisole",
      "B. p-bromoanisole",
      "C. mixture of ortho and para bromoanisole",
      "D. tribromoanisole"
    ],
    "correct": "B",
    "solution": "Without a catalyst, bromination occurs mainly at the para position due to steric hindrance at ortho positions.",
    "solution_steps": [
      "1. Br‚ÇÇ reacts slowly with anisole in absence of catalyst.",
      "2. Steric hindrance reduces ortho substitution.",
      "3. Para-bromoanisole is formed as the major product."
    ]
  }
]

;



let student = '';
let timerHandle;
let printMode = '';
let examDateTime = '';

const quizTitle = document.title.split("Quiz")[1]?.trim() || document.title;

function startQuiz() {
  const name = document.getElementById('studentNameInput').value.trim();
  if (!name) { alert('Please enter your name.'); return; }
  student = name;
  examDateTime = new Date().toLocaleString();
  document.getElementById('name-container').style.display = 'none';
  document.getElementById('quiz-container').style.display = 'block';
  buildQuestions();
  if (window.MathJax) MathJax.typesetPromise();
  startTimer();
}

function buildQuestions() {
  const out = document.getElementById('questions-container');
  out.innerHTML = '';

  Q.forEach((q, index) => {
    const qText = q.text || q.question || q.prompt || ''; // tolerate different keys

    // Normalize options into an ordered array of [letter, optionText]
    let entries = [];
    if (Array.isArray(q.options)) {
      entries = q.options.map((opt, i) => [String.fromCharCode(65 + i), opt]);
    } else if (q.options && typeof q.options === 'object') {
      const keys = Object.keys(q.options);
      const keysAreLetters = keys.every(k => /^[A-Z]$/.test(k));
      if (keysAreLetters) {
        keys.sort();
        entries = keys.map(k => [k, q.options[k]]);
      } else {
        entries = keys.map((k, i) => [String.fromCharCode(65 + i), q.options[k]]);
      }
    }

    const optionsHTML = entries.map(([letter, opt]) => {
      return `<label class="option-item" for="${q.id}-${letter}">
                <input type="radio" id="${q.id}-${letter}" name="${q.id}" value="${letter}" onchange="enableSubmit('${q.id}')">
                ${letter}. ${opt}
              </label>`;
    }).join('');

    const imageHTML = q.image ? `<div><img src="${q.image}" alt="figure" style="max-width:360px; margin:10px 0; display:block;"></div>` : '';

    // Handle solution steps if they exist
    let solutionStepsHTML = '';
    if (q.solution_steps && Array.isArray(q.solution_steps) && q.solution_steps.length > 0) {
      solutionStepsHTML = '<ul style="margin-top:10px;">' +
        q.solution_steps.map(step => `<li>${step}</li>`).join('') +
        '</ul>';
    }

    out.insertAdjacentHTML('beforeend', `
      <div class="question" id="${q.id}-wrap">
        <h3>Q${index + 1}. ${qText}</h3>
        ${imageHTML}
        <div class="options">${optionsHTML}</div>
        <div id="${q.id}-buttons">
          <button id="sub-${q.id}" class="submit-button" disabled onclick="grade('${q.id}')">Submit</button>
          <button class="dontknow-button" onclick="skip('${q.id}')">I Don‚Äôt Know</button>
        </div>
        <button class="toggle-button" id="btn-sol-${q.id}" style="display:none;" onclick="toggleSolution('sol-${q.id}')">Show Solution</button>
        <div class="solution" id="sol-${q.id}">
          <strong>Solution:</strong> ${q.solution || ''} ${solutionStepsHTML}
        </div>
      </div>
    `);
  });

  if (window.MathJax && typeof MathJax.typesetPromise === 'function') MathJax.typesetPromise();
}



function enableSubmit(qid) { document.getElementById(`sub-${qid}`).disabled = false; }

function grade(qid) {
  const q = Q.find(x => x.id === qid);
  // accept different possible field names for the correct answer
  const correct = q.correct || q.answer || q.key || q.correctAnswer;
  const chosen = document.querySelector(`input[name="${qid}"]:checked`);
  if (!chosen) return;

  // lock options
  document.querySelectorAll(`input[name="${qid}"]`).forEach(i => i.disabled = true);

  // the chosen label
  const chosenLabel = chosen.closest('label.option-item');

  // find input that matches the correct letter
  const correctInput = document.querySelector(`input[name="${qid}"][value="${correct}"]`);
  const correctLabel = correctInput ? correctInput.closest('label.option-item') : null;

  if (chosen.value === correct) {
    // correct
    if (chosenLabel) {
      chosenLabel.style.background = '#28a745';
      chosenLabel.style.color = '#fff';
    }
  } else {
    // wrong: mark chosen red, mark correct green (if found)
    if (chosenLabel) {
      chosenLabel.style.background = '#dc3545';
      chosenLabel.style.color = '#fff';
    }
    if (correctLabel) {
      correctLabel.style.background = '#28a745';
      correctLabel.style.color = '#fff';
    }
  }

  // show solution immediately
  const solElem = document.getElementById(`sol-${qid}`);
  if (solElem) solElem.style.display = "block";

  // hide the buttons for this question
  const buttons = document.getElementById(`${qid}-buttons`);
  if (buttons) buttons.style.display = "none";
  const btnSol = document.getElementById(`btn-sol-${q.id}`);
  if (btnSol) btnSol.style.display = "none";

  // re-typeset MathJax for solution if it contains LaTeX
  if (window.MathJax && typeof MathJax.typesetPromise === 'function') MathJax.typesetPromise();
}


function skip(qid) { document.querySelectorAll(`input[name="${qid}"]`).forEach(r => r.disabled = true); showSolutionButton(qid); }
function showSolutionButton(qid) { document.getElementById(`btn-sol-${qid}`).style.display = 'inline-block'; document.getElementById(`${qid}-buttons`).style.display = 'none'; }
function toggleSolution(id) { const elem = document.getElementById(id); elem.style.display = elem.style.display === 'block' ? 'none' : 'block'; }

function startTimer() {
  const display = document.getElementById('timer');
  const started = Date.now();
  timerHandle = setInterval(() => { const s = Math.floor((Date.now() - started) / 1000); display.textContent = `${String((s / 60) | 0).padStart(2,'0')}:${String(s % 60).padStart(2,'0')}`; }, 1000);
}

function finalSubmit() {
  clearInterval(timerHandle);
  document.querySelectorAll("input[type=radio]").forEach(r => r.disabled = true);
  document.querySelectorAll(".submit-button, .dontknow-button").forEach(btn => btn.style.display = "none");

  let totalMarks = 0;
  let negativeMarks = 0;
  let possibleMarks = Q.length * 4;
  let detailHTML = '';

  Q.forEach((q, index) => {
    const checked = document.querySelector(`input[name="${q.id}"]:checked`);
    const chosen = checked ? checked.value : null;

    const correctLetter = q.correct || q.answer || q.key || q.correctAnswer;

    let marks = 0;
    let resultText = "";

    if (chosen === null) {
      marks = 0;
      resultText = "‚ö™ Not Attempted / I Don‚Äôt Know (0)";
    } else if (chosen === correctLetter) {
      marks = 4;
      resultText = "‚úÖ Correct (+4)";
    } else {
      marks = -1;
      resultText = "‚ùå Incorrect (-1)";
    }

    totalMarks += marks > 0 ? marks : 0;
    negativeMarks += marks < 0 ? marks : 0;

    let solutionStepsHTML = '';
    if (q.solution_steps && Array.isArray(q.solution_steps) && q.solution_steps.length > 0) {
      solutionStepsHTML = '<ul style="margin-top:5px;">' +
        q.solution_steps.map(step => `<li>${step}</li>`).join('') +
        '</ul>';
    }

    detailHTML += `
      <tr>
        <td>${index + 1}</td>
        <td>${q.text || q.question}</td>
        <td>${chosen || 'Not Answered'}</td>
        <td>${correctLetter}</td>
        <td>${resultText}</td>
        <td>${q.solution || ''}${solutionStepsHTML}</td>
        <td>${marks}</td>
      </tr>`;
  });

  const finalScore = totalMarks + negativeMarks;

  document.getElementById('scoreText').innerHTML = `${student}, here is your result:`;
  document.getElementById('scoreDetails').innerHTML = detailHTML;

  const summaryHTML = `
    <div style="margin-top:20px; font-weight:bold;">
      <p>Total Marks (Possible): ${possibleMarks}</p>
      <p>Total Marks (Correct Answers): ${totalMarks}</p>
      <p>Negative Marks (Wrong Answers): ${negativeMarks}</p>
      <p>Final Score: ${finalScore}</p>
    </div>
  `;
  document.getElementById('scorecard').insertAdjacentHTML('beforeend', summaryHTML);

  document.getElementById('scorecard').style.display = 'block';
  document.getElementById('printScoreBtn').style.display = 'inline-block';
  document.getElementById('shareWhatsappBtn').style.display = 'inline-block';

  if (window.MathJax && typeof MathJax.typesetPromise === 'function') MathJax.typesetPromise();
}






function printQuestions() { printMode = "questions"; window.print(); }
function printScorecard() { document.getElementById("studentPrintName").innerText = student; document.getElementById("examDateTime").innerText = "Exam Date & Time: " + examDateTime; printMode = "scorecard"; window.print(); }

window.addEventListener('beforeprint', () => {
  if (printMode === "questions") { document.querySelector("#questions-container").style.display = "block"; document.querySelector("#scorecard").style.display = "none"; document.querySelector("#logo").style.display = "none"; document.querySelector("#name-container").style.display = "none"; document.querySelector("#timer").style.display = "none"; document.querySelector("#studentPrintName").style.display = "none"; document.querySelector("#examDateTime").style.display = "none"; }
  if (printMode === "scorecard") { document.querySelector("#questions-container").style.display = "none"; document.querySelector("#scorecard").style.display = "block"; document.querySelector("#logo").style.display = "block"; document.querySelector("#name-container").style.display = "none"; document.querySelector("#studentPrintName").style.display = "block"; document.querySelector("#examDateTime").style.display = "block"; }
});
window.addEventListener('afterprint', () => { document.querySelector("#questions-container").style.display = ""; document.querySelector("#scorecard").style.display = ""; document.querySelector("#logo").style.display = ""; document.querySelector("#name-container").style.display = ""; document.querySelector("#timer").style.display = ""; document.querySelector("#studentPrintName").style.display = "none"; document.querySelector("#examDateTime").style.display = "none"; });




document.getElementById("shareWhatsappBtn").addEventListener("click", function () {
  const whatsappNumber = "9108069409455";

  if (!student) {
    alert("Please complete the quiz first.");
    return;
  }

  const scoreText = document.getElementById('scoreText').innerText || "Result not available";

  let totalMarks = 0;
  let negativeMarks = 0;
  let possibleMarks = Q.length * 4;

  let details = "";

  Q.forEach((q, i) => {
    const qNum = i + 1;
    const checked = document.querySelector(`input[name="${q.id}"]:checked`);
    let userAns = checked ? checked.value : null;
    const correctAns = q.correct || q.answer || q.key || q.correctAnswer;

    let marks = 0;
    let resultText = "";

    if (userAns === null) {
      marks = 0;
      resultText = "‚ö™ Not Attempted / I Don‚Äôt Know (0)";
      userAns = "Not Answered";
    } else if (userAns === correctAns) {
      marks = 4;
      resultText = "‚úÖ Correct (+4)";
    } else {
      marks = -1;
      resultText = "‚ùå Incorrect (-1)";
    }

    totalMarks += marks > 0 ? marks : 0;
    negativeMarks += marks < 0 ? marks : 0;

    details += `Q${qNum} ‚Üí ${resultText} (Your Ans: ${userAns} | Correct: ${correctAns})\n`;
  });

  const finalScore = totalMarks + negativeMarks;

  const message = `Sir, I have shared my Test Result for checking. Thank you!\n\nüìò Quiz Title: ${quizTitle}\nüë§ Student: ${student}\n\n${scoreText}\n\nüìä Summary:\n‚úî Total Marks (Possible): ${possibleMarks}\n‚úî Total Marks (Correct Answers): ${totalMarks}\n‚úî Negative Marks (Wrong Answers): ${negativeMarks}\n‚úî Final Score: ${finalScore}\n\nDetails:\n${details}`;

  const waUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
  window.open(waUrl, "_blank");
});


const reportBtn = document.getElementById("reportBtn");
const reportModal = document.getElementById("reportModal");
const sendReport = document.getElementById("sendReport");
const closeReport = document.getElementById("closeReport");
const reportMsg = document.getElementById("reportMsg");

reportBtn.onclick = () => { reportModal.style.display = "block"; };
closeReport.onclick = () => { reportModal.style.display = "none"; reportMsg.value = ""; };
sendReport.onclick = () => {
  const msg = reportMsg.value.trim();
  if (!msg) { alert("Please write your message before sending."); return; }
  const whatsappNumber = "9108069409455";
  const message = `‚ö†Ô∏è Reported Mistake\n\nüìò Quiz Title: ${quizTitle}\nüë§ Student: ${student || "Anonymous"}\n\nüìù Message:\n${msg}`;
  const waUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
  window.open(waUrl, "_blank");
  reportModal.style.display = "none";
  reportMsg.value = "";
};
</script>

</body>
</html>
